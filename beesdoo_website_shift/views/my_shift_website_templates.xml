<?xml version="1.0" encoding="utf-8" ?>
<!--
     Copyright 2017-2020 RÃ©my Taymans <remytaymans@gmail.com>
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->
<odoo>

    <!-- Add menu entries -->
    <template
        id="my_shift_link"
        name="Link to frontend portal"
        inherit_id="portal.frontend_layout"
    >
        <xpath expr="//a[@id='o_logout']" position="before">
            <a href="/my/shift" class="dropdown-item" role="menuitem">My Shift
            </a>
        </xpath>
    </template>

    <!-- Reusable templates -->
    <template id="my_shift_title" name="My Shift Title">
        <!-- Display feedback (error or success messages) -->
        <div
            t-if="display_message"
            role="alert"
            t-att-class="'alert alert-%s alert-dismissible' % ('success' if success_message else 'danger')"
        >
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <![CDATA[&times;]]>
            </button>
            <t t-if="success_message">
                <strong>Success!</strong>
                <t t-esc="success_message" />
            </t>
            <t t-else="">
                <strong>Error!</strong>
                <t t-esc="error_message" />
            </t>
        </div>
        <h1>
            Your shifts
        </h1>
    </template>

    <template id="my_shift_worker_status_title" name="My Shift Worker Status Title">

        <h2>
            Worker status
            <span
                t-att-class="'badge %s pull-right' % ('badge-success' if status.can_shop else 'badge-danger',)"
            >
                <span class="fa fa-shopping-cart" />
                <t t-if="status.can_shop">
                    <span class="fa fa-check" />
                </t>
                <t t-if="not status.can_shop">
                    <span class="fa fa-times" />
                </t>
            </span>
        </h2>

    </template>

    <template id="my_shift_worker_status_common" name="My Shift Worker Status Common">

        <p id="working_mode">
            <label class="font-weight-bold">Working Mode:</label>
            <t
                t-esc="dict(status.fields_get(allfields=['working_mode'])['working_mode']['selection'])[status.working_mode]"
            />
        </p>

        <p t-if="status.super">
            You are a Super Cooperator
        </p>

        <p>
            <label class="font-weight-bold">Status:</label>
            <t
                t-esc="dict(status.fields_get(allfields=['status'])['status']['selection'])[status.status]"
            />
            <br />
            <t t-if="compensation_ok">
                <a href="/shift/compensation" class="btn btn-primary btn-sm">
                    Subscribe to a compensation shift
                </a>
            </t>
        </p>

        <p
            t-if="status.holiday_start_time and status.holiday_start_time > status.today or status.status == 'holiday'"
        >
            <label class="font-weight-bold">Begin of Holiday:</label>
            <t t-esc="status.holiday_start_time" />
        </p>

        <p
            t-if="status.holiday_end_time and status.holiday_end_time > status.today or status.status == 'holiday'"
        >
            <label class="font-weight-bold">End of Holiday:</label>
            <t t-esc="status.holiday_end_time" />
        </p>

    </template>


    <template id="shift_status_label" name="Shift Status Label">

        <span
            t-if="shift.state == 'draft'"
            t-attf-class="badge badge-default ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.state == 'done'"
            t-attf-class="badge badge-success ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.state == 'absent_2'"
            t-attf-class="badge badge-warning ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.state == 'absent_1'"
            t-attf-class="badge badge-info ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.state == 'absent_0'"
            t-attf-class="badge badge-info ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.state == 'cancel'"
            t-attf-class="badge badge-danger ml-1 {{label_css}}"
        >
            <t t-esc="shift.state" />
        </span>

        <span
            t-if="shift.is_compensation"
            t-attf-class="badge badge-info ml-1 {{label_css}}"
        >
            compensation
        </span>

    </template>


    <template id="my_shift_next_shifts" name="My Shift : Next Shifts">

        <h2>
            Your next shifts
        </h2>

        <div class="alert alert-warning">
            <strong>Warning !</strong>
            For the moment public holidays are not taken into account. If your
            shift
            occures during a public holiday, you do not have to do it.
        </div>

        <t
            t-set="shift_display_number"
            t-value="int(request.env['ir.config_parameter'].sudo().get_param('beesdoo_website_shift.next_shifts_display_number'))"
        />

        <t t-foreach="subscribed_shifts" t-as="shift">
            <div
                t-att-class="'card mb-4 %s%s' % (highlight_class, ' collapse multi-collapse' if shift_index >= shift_display_number else '')"
            >
                <div t-att-class="'card-header %s clearfix' % highlight_header_class">
                    <div class="pull-left">
                        <span
                            t-field="shift.start_time"
                            t-options='{"format": "dd/MM/yyyy HH:mm"}'
                        />
                        -
                        <span
                            t-field="shift.end_time"
                            t-options='{"format": "HH:mm"}'
                        />
                    </div>
                    <t t-call="beesdoo_website_shift.shift_status_label">
                        <t t-set="label_css" t-value="'pull-right'" />
                    </t>
                </div>
                <div class="card-body clearfix">
                    <t t-esc="shift.task_type_id.name" />
                    <button
                        type="button"
                        class="btn btn-default btn-sm ml-2 pull-right"
                        t-if="shift.super_coop_id.name and shift.super_coop_id.share_supercoop_info"
                        data-toggle="modal"
                        t-att-data-target="'#super_coop-shift-%s' % shift_index"
                    >
                        <span class="fa fa-info" aria-hidden="true" />
                        Super Cooperator Info
                    </button>
                    <t
                        t-if="((shift.is_compensation and request.website.enable_unsubscribe_compensation) or (not shift.is_compensation and request.website.irregular_enable_unsubscribe))"
                    >
                        <t t-if="shift.can_unsubscribe">
                            <button
                                id="unsubscribe_button"
                                type="button"
                                class="btn btn-primary btn-sm ml-2 pull-right"
                                data-toggle="modal"
                                t-att-data-target="'#unsubscribe-shift-%s' % shift.id"
                            >
                                <span class="fa fa-user-plus" aria-hidden="true" />
                                Unsubscribe
                            </button>
                        </t>
                        <t
                            t-elif="shift.state == 'open' and (shift.worker_id.working_mode == 'irregular' or shift.is_compensation) and not shift.check_hours_to_unsubscribe()"
                        >
                            <div
                                id="unsubscribe_disabled_popover"
                                class="d-inline-block pull-right"
                                data-toggle="popover"
                                data-placement="top"
                                data-trigger="hover"
                                t-att-data-content="'%s' % too_late_unsubscribe_message"
                            >
                                <button
                                    id="disabled_unsubscribe_button"
                                    class="btn btn-primary btn-sm ml-2 disabled pull-right"
                                    style="pointer-events: none;"
                                >
                                    <span class="fa fa-user-plus" aria-hidden="true" />
                                    Unsubscribe
                                </button>
                            </div>
                        </t>
                    </t>
                </div>
            </div>
            <t t-if="shift_last and shift_index >= shift_display_number">
                <p>
                    <button
                        id="toggle_shifts_button"
                        class="btn btn-primary btn-block"
                        type="button"
                        data-toggle="collapse"
                        data-target=".multi-collapse"
                        aria-expanded="true"
                    >Show next shifts</button>
                </p>
            </t>
        </t>

        <t t-foreach="subscribed_shifts" t-as="shift">
            <!-- Super Cooperator info modal -->
            <div
                class="modal fade"
                t-if="shift.super_coop_id.name"
                t-att-id="'super_coop-shift-%s' % shift_index"
                tabindex="-1"
                role="dialog"
                t-att-aria-labelledby="'super_coop-shift-%s-label' % shift_index"
            >
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button
                                type="button"
                                class="close"
                                data-dismiss="modal"
                                aria-label="Close"
                            >
                                <span aria-hidden="true">Ã</span>
                            </button>
                            <h4
                                class="modal-title"
                                t-att-id="'super_coop-shift-%s-label' % shift_index"
                            >
                                <t t-esc="shift.super_coop_id.name" />
                            </h4>
                        </div>
                        <div class="modal-body text-center">
                            <i class="fa fa-phone" aria-hidden="true" />
                            <t t-esc="shift.super_coop_id.phone" />
                            <br />
                            <i class="fa fa-envelope" aria-hidden="true" />
                            <a t-att-href="'mailto:%s' % shift.super_coop_id.email">
                                <t t-esc="shift.super_coop_id.email" />
                            </a>
                        </div>
                        <div class="modal-footer">
                            <button
                                type="button"
                                class="btn btn-primary"
                                data-dismiss="modal"
                            >Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Unsubscription confirmation modal -->
            <div
                class="modal fade"
                t-att-id="'unsubscribe-shift-%s' % shift.id"
                tabindex="-1"
                role="dialog"
                t-att-aria-labelledby="'unsubscribe-shift-%s-label' % shift.id"
            >
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4
                                class="modal-title"
                                t-att-id="'subscribe-shift-%s-label' % shift.id"
                            >
                                Please confirm unsubscription
                            </h4>
                        </div>
                        <div class="modal-body text-center">
                            <span
                                t-field="shift.start_time"
                                t-options='{"format": "dd/MM/yyyy HH:mm"}'
                            />
                            -
                            <span
                                t-field="shift.end_time"
                                t-options='{"format": "HH:mm"}'
                            />
                            <br />
                            <t t-esc="shift.task_type_id.name" />
                        </div>
                        <div class="modal-footer">
                            <button
                                type="button"
                                class="btn btn-danger"
                                data-dismiss="modal"
                            >Cancel
                            </button>
                            <a
                                class="btn btn-success"
                                t-att-href="'/shift/%s/unsubscribe?nexturl=%s' % (shift.id, nexturl or '/my/shift')"
                            >
                                Unsubscribe
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </t>

        <div class="alert alert-warning" t-if="not subscribed_shifts">
            <strong>Warning !</strong>
            You have not yet signed up to a shift.
        </div>

    </template>

    <template id="my_shift_past_shifts" name="My Shift : Past Shifts">

        <h2>
            Your past shifts
        </h2>

        <t t-foreach="past_shifts" t-as="shift">
            <div t-att-class="'card mb-4 %s' % highlight_class">
                <div t-att-class="'card-header %s clearfix' % highlight_header_class">
                    <div class="pull-left">
                        <span
                            t-field="shift.start_time"
                            t-options='{"format": "dd/MM/yyyy HH:mm"}'
                        />
                        -
                        <span
                            t-field="shift.end_time"
                            t-options='{"format": "HH:mm"}'
                        />
                    </div>
                    <t t-call="beesdoo_website_shift.shift_status_label">
                        <t t-set="label_css" t-value="'pull-right'" />
                    </t>
                </div>
                <div class="card-body clearfix">
                    <t t-esc="shift.task_type_id.name" />
                </div>
            </div>
        </t>

        <div class="alert alert-info" t-if="not past_shifts">
            <strong>Info !</strong>
            You don't have any past shift.
        </div>

    </template>

    <template
        id="available_shift_irregular_worker_card"
        name="Available Shift for Irregular Worker"
    >
        <t t-set="shift" t-value="displayed_shift.shift" />
        <t t-set="count" t-value="displayed_shift.free_space" />
        <t t-set="is_subscribed" t-value="displayed_shift.is_subscribed" />
        <t t-set="has_enough_workers" t-value="displayed_shift.has_enough_workers" />
        <t
            t-set="highlight_class"
            t-value="'bg-warning' if not has_enough_workers else 'bg-light'"
        />

        <div t-att-class="'card %s' % highlight_class">
            <div class="center m-1 font-weight-bold" t-esc="shift.task_type_id.name" />
            <div class="badge badge-secondary m-1" t-if="count > 0">
                <t t-esc="count" />
                spot(s)
            </div>
            <div class="badge badge-secondary m-1" t-if="count == 0">
                full
            </div>
            <div class="badge badge-secondary m-1" t-if="is_subscribed">
                Subscribed
            </div>
            <button
                type="button"
                class="btn btn-default btn-sm m-1"
                data-toggle="modal"
                t-att-data-target="'#subscribe-shift-%s' % shift.id"
                t-if="irregular_enable_sign_up and not is_subscribed"
            >
                <span class="fa fa-user-plus" aria-hidden="true" />
                Subscribe
            </button>
        </div>

        <!-- Subscribe modals -->
        <div
            class="modal fade"
            t-att-id="'subscribe-shift-%s' % shift.id"
            tabindex="-1"
            role="dialog"
            t-att-aria-labelledby="'subscribe-shift-%s-label' % shift.id"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">Ã</span>
                        </button>
                        <h4
                            class="modal-title"
                            t-att-id="'subscribe-shift-%s-label' % shift.id"
                        >
                            Please confirm subscription
                        </h4>
                    </div>
                    <div class="modal-body text-center">
                        <span
                            t-field="shift.start_time"
                            t-options='{"format": "dd/MM/yyyy HH:mm"}'
                        />
                        -
                        <span
                            t-field="shift.end_time"
                            t-options='{"format": "HH:mm"}'
                        />
                        <br />
                        <t t-esc="shift.task_type_id.name" />
                        <br />
                        <t t-esc="count" />
                        available space(s)
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >Close
                        </button>
                        <a
                            class="btn btn-primary"
                            t-if="irregular_enable_sign_up"
                            t-att-href="'/shift/%s/subscribe?nexturl=%s' % (shift.id, nexturl)"
                        >
                            Subscribe
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template
        id="available_shift_compensation_card"
        name="Available Shift for compensation"
    >
        <t t-set="shift" t-value="displayed_shift.shift" />
        <div t-att-class="'card %s' % highlight_class">
            <div class="center m-1 font-weight-bold" t-esc="shift.task_type_id.name" />
            <button
                type="button"
                class="btn btn-primary btn-sm m-1"
                data-toggle="modal"
                t-att-data-target="'#subscribe-shift-%s' % shift.id"
            >
                <span class="fa fa-user-plus" aria-hidden="true" />
                Subscribe
            </button>
        </div>

        <!-- Subscribe modals -->
        <div
            class="modal fade"
            t-att-id="'subscribe-shift-%s' % shift.id"
            tabindex="-1"
            role="dialog"
            t-att-aria-labelledby="'subscribe-shift-%s-label' % shift.id"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">Ã</span>
                        </button>
                        <h4
                            class="modal-title"
                            t-att-id="'subscribe-shift-%s-label' % shift.id"
                        >
                            Please confirm subscription
                        </h4>
                    </div>
                    <div class="modal-body text-center">
                        <span
                            t-field="shift.start_time"
                            t-options='{"format": "dd/MM/yyyy HH:mm"}'
                        />
                        -
                        <span
                            t-field="shift.end_time"
                            t-options='{"format": "HH:mm"}'
                        />
                        <br />
                        <t t-esc="shift.task_type_id.name" />
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-danger"
                            data-dismiss="modal"
                        >Cancel
                        </button>
                        <a
                            class="btn btn-success"
                            t-att-href="'/shift/compensation/%s/subscribe' % (shift.id)"
                        >
                            Subscribe
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template
        id="available_shift_irregular_worker_row"
        name="Available Shifts by Week Row"
    >
        <t t-set="headers" t-value="shift_by_week['headers']" />
        <t t-set="rows" t-value="shift_by_week['rows']" />
        <div class="table-responsive">
            <table class="table text-center">
                <thead>
                    <th style="width: 9%" />
                    <t t-foreach="headers" t-as="header">
                        <th style="width: 13%">
                            <!-- Using array of week days instead of strftime to enable translation -->
                            <t t-esc="week_days[header_index]" />
                            <br />
                            <t t-esc="header.strftime('%d/%m')" />
                        </th>
                    </t>
                </thead>
                <tbody>
                    <t t-foreach="rows" t-as="shift_row">
                        <t t-set="start_time" t-value="shift_row[0][0]" />
                        <t t-set="end_time" t-value="shift_row[0][1]" />
                        <tr>
                            <td class="text-center align-middle">
                                <div>
                                    <div t-esc="start_time" />
                                    <div>-</div>
                                    <div t-esc="end_time" />
                                </div>
                            </td>
                            <t t-foreach="shift_row[1]" t-as="shift_by_day">
                                <td class="align-middle">
                                    <t t-if="shift_by_day">
                                        <t t-foreach="shift_by_day" t-as="shift">
                                            <t
                                                t-call="beesdoo_website_shift.available_shift_irregular_worker_card"
                                            >
                                                <t
                                                    t-set="displayed_shift"
                                                    t-value="shift"
                                                />
                                            </t>
                                        </t>
                                    </t>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template
        id="available_shift_compensation_row"
        name="Available Shifts for compensation by Week Row"
    >
        <t t-set="headers" t-value="shift_by_week['headers']" />
        <t t-set="rows" t-value="shift_by_week['rows']" />
        <div class="table-responsive">
            <table class="table text-center">
                <thead>
                    <th style="width: 9%" />
                    <t t-foreach="headers" t-as="header">
                        <th style="width: 13%">
                            <!-- Using array of week days instead of strftime to enable translation -->
                            <t t-esc="week_days[header_index]" />
                            <br />
                            <t t-esc="header.strftime('%d/%m')" />
                        </th>
                    </t>
                </thead>
                <tbody>
                    <t t-foreach="rows" t-as="shift_row">
                        <t t-set="start_time" t-value="shift_row[0][0]" />
                        <t t-set="end_time" t-value="shift_row[0][1]" />
                        <tr>
                            <td class="text-center align-middle">
                                <div>
                                    <div t-esc="start_time" />
                                    <div>-</div>
                                    <div t-esc="end_time" />
                                </div>
                            </td>
                            <t t-foreach="shift_row[1]" t-as="shift_by_day">
                                <td class="align-middle">
                                    <t t-if="shift_by_day">
                                        <t t-foreach="shift_by_day" t-as="shift">
                                            <t
                                                t-call="beesdoo_website_shift.available_shift_compensation_card"
                                            >
                                                <t
                                                    t-set="displayed_shift"
                                                    t-value="shift"
                                                />
                                            </t>
                                        </t>
                                    </t>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template
        id="available_shift_irregular_worker_grid"
        name="Available Shifts for Irregular Worker"
    >
        <!-- Renders week planning of schema:
        [(datetime.date(2021, 1, 18),  # week
            {'headers': [datetime.date(2021, 1, 18), ]  # week days
             'rows': [(('07:00', '09:15'),  # start and end time
                       [DisplayedShift(  # shifts by day or None (7 columns)
                            shift=shift.shift(11950,),
                            free_space=1,
                            is_subscribed=False,
                            has_enough_workers=False)), *
                        ], *
                      ), ...
                     ],
            }), ...
        ]
        -->
        <div>
            <t t-foreach="shift_weeks" t-as="shift_week_tuple">
                <div class="card mb-2">
                    <t t-set="week" t-value="shift_week_tuple[0]" />
                    <div class="card-body p-0">
                        <t
                            t-call="beesdoo_website_shift.available_shift_irregular_worker_row"
                        >
                            <t t-set="shift_by_week" t-value="shift_week_tuple[1]" />
                        </t>
                    </div>
                </div>
            </t>
        </div>
    </template>

    <template
        id="available_shift_compensation_grid"
        name="Available Shifts for compensation"
    >
        <div>
            <t t-foreach="shift_weeks" t-as="shift_week_tuple">
                <div class="card mb-2">
                    <t t-set="week" t-value="shift_week_tuple[0]" />
                    <div class="card-body p-0">
                        <t
                            t-call="beesdoo_website_shift.available_shift_compensation_row"
                        >
                            <t t-set="shift_by_week" t-value="shift_week_tuple[1]" />
                        </t>
                    </div>
                </div>
            </t>
        </div>
    </template>

    <!-- Help Texts -->
    <template id="help_text_title" name="Help Text Title">
        <h2>
            Help
            <button
                id="toggle_help_button"
                class="btn btn-primary btn-sm"
                type="button"
                data-toggle="collapse"
                data-target="#collapseHelp"
                aria-expanded="true"
                aria-controls="collapseHelp"
            >
                Hide
            </button>
        </h2>
    </template>

    <template id="help_text_info" name="Help Text Info">
        <div class="alert alert-info">
            <strong>Info!</strong>
            If you do not agree with your status, please contact the members
            office by mail (membre@bees-coop.be) or during the open hours of the
            office (Monday 5PM to 7:30PM, Wednesday 5PM to 7:30 PM and Friday
            2:30PM to 5 PM).
        </div>
    </template>

    <template id="help_text_common" name="Help Text Common">
        <p>
            Explanation of the status:
        </p>

        <p>
            <strong>Up To Date:</strong>
            That's perfect! You are in order. Thanks a lot. You can come and
            shop, so can your eaters if you have any.
        </p>
    </template>

    <template id="help_text_regular_worker" name="Help Text for Regular Worker">
        <p class="h_reg_alert">
            <strong>Alert:</strong>
            If you are in alert status, that means you didn't do your last
            shift. You have
            until your next scheduled shift to do your compensation shift
            according to your situation.
            Your compensation is either simple or double. If you don't how how
            many compensation shifts you have to do, please contact your
            supercooperator.
            To do your compensation shift, no need to subscribe in advance : you
            come at the beginning of the shift that best suits you.
            Add your name and the indication "compensation shift" on the
            attendance list.
            No panic, you still can come and shop, so can your eaters if you
            have any.
        </p>
        <p class="h_reg_suspended">
            <strong>Suspended:</strong>
            If you are suspended, that means you didn't come to a shift and you
            didn't do you compensation shifts in the delay (4 weeks).
            You cannot shop (so as your eaters). But no need to panic : a
            two-weeks delay is activable on demand at the entrance of the
            supermarket.
            You will be able to shop during 2 more weeks and to put your
            situation in order.
            To do your compensation shift, no need to subscribe in advance : you
            come at the beginning of the shift that best suits you.
            Add your name and the indication "compensation shift" on the
            attendance list.
        </p>
        <p class="h_reg_autoextension">
            <strong>Auto-Extension:</strong>
            You didn't manage to do your compensation shifts in the delay but
            you benefit from the auto-extension.
            This is two more weeks to do your compensation shifts. You can shop.
            If you don't do your compensation shifts, you'll be suspended.
        </p>
        <p class="h_reg_unsubscribed">
            <strong>Unsubscribed:</strong>
            You did not attend two consecutive shifts. You are now unsubscribed.
            You cannot shop (nor can your eaters) nor come to work.
            To subscribe again, please contact membre@bees-coop.be or come to
            the members office during the opening hours.
        </p>
    </template>

    <template id="help_text_irregular_worker" name="Help Text for Irregular Worker">
        <p class="h_irreg_alert">
            <strong>Alert:</strong>
            If you are in alert status, that means you didn't anticipate enough
            shifts.
            Your counter is now negative, directly to -2.
            You have 4 weeks to do 2 shifts to be up to date.
            For the compensation shifts, subscribe like you do for a normal
            shift.
            Be careful, in addition to these 2 shifts, don't forget to do your
            normal shift in the same delay to prevent to be in the same
            situation next month.
        </p>
        <p class="h_irreg_suspended">
            <strong>Suspended:</strong>
            You did not anticipate enough shifts and you did not come back to a
            normal situation in the delay.
            You cannot shop anymore, nor can your eaters.
            But no need to panic : a two-weeks delay is activable on demand at
            the entrance of the supermarket.
            You will be able to shop during 2 more weeks and to put your
            situation in order.
            For the compensation shifts, subscribe like you do for a normal
            shift.
        </p>
        <p class="h_irreg_autoextension">
            <strong>Auto-Extension:</strong>
            You didn't manage to do your compensation shifts in the delay but
            you benefit from the auto-extension.
            This is two more weeks to do your compensation shifts. You can shop.
            If you don't do your compensation shifts, you'll be suspended.
        </p>
        <p class="h_irreg_unsubscribed">
            <strong>Unsubscribed:</strong>
            Your counter is negative and you haven't come to work for more than
            8 weeks.
            You are unsubscribed. You cannot shop nor can your eaters.
            To subscribe again of if it's a mistake, please contact
            membre@bees-coop.be or come to the members office during the opening
            hours.
        </p>
    </template>

    <!-- Shift for non-worker -->
    <template id="my_shift_non_worker" name="My Shift for Non Worker">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />

            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">

                        <div class="alert alert-info">
                            You don't have to participate to shift system.
                        </div>

                    </div>
                </div>
            </div>

        </t>
    </template>

    <!-- Shift for new worker -->
    <template id="my_shift_new_worker" name="My Shift for New Worker">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />


            <div class="container mt6">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">

                        <div class="alert alert-info">
                            Please contact the members office to suscribe to
                            shifts.
                        </div>

                    </div>
                </div>
            </div>

        </t>
    </template>

    <!-- Shifts Exempted Workers -->
    <template id="my_shift_exempted_worker" name="My Shifts for Exempted Workers">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />


            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>

                <div class="row">

                    <div class="col-12 col-lg-6 m-auto text-justify">

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_title"
                        />

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_common"
                        />

                        <p t-if="status.exempt_reason_id">
                            <label class="font-weight-bold">Exempt Reason:
                            </label>
                            <t t-esc="status.exempt_reason_id.name" />
                        </p>

                    </div>

                    <div class="col-12 col-lg-8 m-auto">

                        <div class="alert alert-info">
                            You don't have to participate to shift system.
                        </div>

                    </div>
                </div>
            </div>

        </t>
    </template>

    <!-- Shifts regular worker without shift -->
    <template
        id="my_shift_regular_worker_without_shift"
        name="My Shifts for regular worker without shift"
    >
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />


            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-6 m-auto text-justify">

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_title"
                        />

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_common"
                        />

                    </div>

                    <div class="col-12 col-lg-8 m-auto">

                        <div class="alert alert-info">
                            Please contact the members office to suscribe to
                            shifts.
                        </div>

                    </div>
                </div>
            </div>

        </t>
    </template>


    <!-- Shifts for Regular Workers -->
    <template id="my_shift_regular_worker" name="My Shifts for Regular Workers">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />

            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 col-lg-6 m-auto text-justify">

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_title"
                        />

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_common"
                        />

                        <p t-if="status.sr != 0">
                            <label class="font-weight-bold">Shift in Advance:
                            </label>
                            <t t-esc="status.sr" />
                        </p>

                        <p t-if="status.sc != 0">
                            <label class="font-weight-bold">Compensation
                                Shift:
                            </label>
                            <t t-esc="status.sc" />
                        </p>

                        <p t-if="status.alert_start_time">
                            <label class="font-weight-bold">In Alert Since:
                            </label>
                            <t t-esc="status.alert_start_time" />
                        </p>

                        <p t-if="status.extension_start_time">
                            <label class="font-weight-bold">In Extension
                                Since:
                            </label>
                            <t t-esc="status.extension_start_time" />
                        </p>

                        <t t-call="beesdoo_website_shift.help_text_info" />

                    </div>

                </div>
                <div class="row">

                    <div class="col-12 col-lg-8 order-2 order-lg-1">

                        <t t-call="beesdoo_website_shift.my_shift_next_shifts" />

                        <t t-call="beesdoo_website_shift.my_shift_past_shifts" />

                    </div>

                    <div class="col-12 col-lg-4 text-justify order-1 order-lg-2">

                        <t t-call="beesdoo_website_shift.help_text_title" />
                        <div class="collapse show" id="collapseHelp">
                            <t t-call="beesdoo_website_shift.help_text_common" />
                            <t
                                t-call="beesdoo_website_shift.help_text_regular_worker"
                            />
                        </div>

                    </div>
                </div>
            </div>

        </t>
    </template>

    <!-- Shifts for Irregular Workers -->
    <template id="my_shift_irregular_worker" name="Shifts for Irregular Workers">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />

            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <t t-call="beesdoo_website_shift.my_shift_title" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 col-lg-6 m-auto text-justify">

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_title"
                        />

                        <t
                            t-call="beesdoo_website_shift.my_shift_worker_status_common"
                        />

                        <p>
                            <label class="font-weight-bold">Shift in Advance:
                            </label>
                            <t t-esc="status.sr" />
                        </p>

                        <p t-if="status.next_countdown_date">
                            <label class="font-weight-bold">Next Countdown
                                Date:
                            </label>
                            <t t-esc="status.next_countdown_date" />
                        </p>

                        <p t-if="status.future_alert_date">
                            <label class="font-weight-bold">Future Date of
                                Alert:
                            </label>
                            <t t-esc="status.future_alert_date" />
                        </p>

                        <p t-if="status.irregular_absence_date">
                            <label class="font-weight-bold">Last Absence Date:
                            </label>
                            <t t-esc="status.irregular_absence_date" />
                        </p>

                        <p t-if="status.irregular_absence_counter">
                            <label class="font-weight-bold">Number of Absence:
                            </label>
                            <t t-esc="status.irregular_absence_counter" />
                        </p>

                        <t t-call="beesdoo_website_shift.help_text_info" />

                        <t t-call="beesdoo_website_shift.help_text_title" />
                        <div class="collapse" id="collapseHelp">
                            <t t-call="beesdoo_website_shift.help_text_common" />
                            <t
                                t-call="beesdoo_website_shift.help_text_irregular_worker"
                            />
                        </div>

                    </div>

                    <div class="col-12">

                        <t t-call="beesdoo_website_shift.my_shift_next_shifts" />

                        <h2>
                            Available Shifts
                        </h2>

                        <div class="row">
                            <div class="col-12 col-md-12 text-justify">
                                <p>
                                    Please, subscribe, in priority, to the
                                    highlighted shifts. To sign up to a shift
                                    click on the
                                    subscribe button. Notice that you can not
                                    unsubscribe online. To unsubscribe to a
                                    shift, please,
                                    contact us.
                                </p>
                            </div>
                        </div>

                        <t
                            t-call="beesdoo_website_shift.available_shift_irregular_worker_grid"
                        />

                        <t t-call="beesdoo_website_shift.my_shift_past_shifts" />

                    </div>
                </div>
            </div>

        </t>
    </template>

    <!-- Page to choose a compensation shift -->
    <template id="choose_compensation_shift" name="Choose a compensation shift">
        <t t-call="portal.portal_layout">
            <t t-set="no_breadcrumbs" t-value="True" />
            <div class="container mt16">
                <div class="row">
                    <div class="col text-center">
                        <h1>
                            Compensation
                        </h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <h2 t-if="all_shifts">
                            Choose among all shifts
                        </h2>
                        <t t-else="">
                            <h2>
                                Choose among underpopulated shifts
                            </h2>
                            <h5>
                                If you can't find a shift among these, please click here:
                                <a
                                    class="btn btn-primary btn-sm"
                                    href="/shift/compensation?display_all=1"
                                >
                                    No shift suits me
                                </a>
                            </h5>
                        </t>
                        <t
                            t-call="beesdoo_website_shift.available_shift_compensation_grid"
                        />
                    </div>
                </div>
            </div>
        </t>
    </template>

</odoo>

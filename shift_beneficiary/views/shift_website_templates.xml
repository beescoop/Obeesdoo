<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="available_shift_irregular_worker_card"
        inherit_id="shift_portal.available_shift_irregular_worker_card"
    >
        <xpath expr="//div[@t-out='shift.task_type_id.name']" position="after">
            <small>
                <t t-out="displayed_shift.shift.task_template_id.beneficiary.name" />
            </small>
        </xpath>
    </template>


    <template
        id="public_shift_irregular_worker"
        inherit_id="shift_portal.public_shift_irregular_worker"
    >
        <xpath
            expr="//t[@t-call='shift_portal.available_shift_irregular_worker_grid']"
            position="before"
        >
            <form action="/shift_irregular_worker" method="post">
                <input
                    type="hidden"
                    name="csrf_token"
                    t-att-value="request.csrf_token()"
                />
                <div class="row">
                    <div
                        class="form-group field-beneficiary mb-1"
                        name="select_beneficiary_container"
                    >
                        <label for="beneficiary">Filter by beneficiary: </label>
                        <select name="beneficiary">
                            <option value="">No filter</option>
                            <t t-foreach="beneficiary_list" t-as="beneficiary">
                                <option
                                    t-att-value="beneficiary.id"
                                    t-att-selected="beneficiary.id == selected_beneficiary.id"
                                >
                                    <t t-esc="beneficiary.name" />
                                </option>
                            </t>
                        </select>
                        <button
                            type="submit"
                            class="btn btn-primary btn-sm"
                        >Apply</button>
                    </div>
                </div>
            </form>

        </xpath>
    </template>


    <template
        id="public_shift_template_regular_worker_card"
        inherit_id="shift_portal.public_shift_template_regular_worker_card"
    >
        <xpath expr="//div[hasclass('float-start')]" position="inside">
            <t t-if="template.beneficiary">
                <div>
                    <small>Beneficiary: <t t-out="template.beneficiary.name" />
                    </small>
                </div>
            </t>
        </xpath>
    </template>

</odoo>
